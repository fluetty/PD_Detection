@model PaperFormatDetection.Models.User
@{
    Layout = "~/Views/Shared/_Layout_Index.cshtml";
}
@{
    ViewBag.Title = "Register";
}
<div class="container container-reg">
    <div class="row" style="text-align:center;">
        <div class="col-lg-3"></div>
        <div class="col-lg-6"><h4>用户注册</h4></div>
    </div>
    <form action="/User/Register" method="post" class="register-form" role="form" onsubmit="return Vaild()">
        <!-- 姓名 -->
        <div class="row row-reg">
            <div class="col-lg-3"></div>
            <div class="col-lg-6">
                <div class="input-group" style="background-color:#ff6a00;">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span> 姓名</span>
                    <input type="text" id="Name" name="Name" class="form-control" placeholder="姓名包含中文，字母，下划线，2-20字符">
                </div>
            </div><!-- /.col-lg-6 -->
            <div class="col-lg-3 cue" id="Name-tips"></div>
        </div><!-- /.row -->
        <!-- 学号 -->
        <div class="row row-reg">
            <div class="col-lg-3"></div>
            <div class="col-lg-6">
                <div class="input-group">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-list-alt"></span> 学号</span>
                    <input type="text" id="StuNum" name="StuNum" class="form-control" placeholder="请输入您的学号">
                </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
            <div class="col-lg-3 cue" id="StuNum-tips"></div>
        </div><!-- /.row -->
        <!-- 电话 -->
        <div class="row row-reg">
            <div class="col-lg-3"></div>
            <div class="col-lg-6">
                <div class="input-group">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-earphone"></span> 电话</span>
                    <input type="text" id="Phone" name="Phone" class="form-control" placeholder="请输入您的手机号码">
                </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
            <div class="col-lg-3 cue" id="Phone-tips"></div>
        </div><!-- /.row -->
        <!-- 密码 -->
        <div class="row row-reg">
            <div class="col-lg-3"></div>
            <div class="col-lg-6">
                <div class="input-group">
                    <span class="input-group-addon"><span class="glyphicon glyphicon-lock"></span> 密码</span>
                    <input type="password" id="Password" name="Password" class="form-control" placeholder="请输入密码，6-20字符">
                </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
            <div class="col-lg-3 cue" id="Password-tips"></div>
        </div><!-- /.row -->
        <!-- 确认密码 -->
        <div class="row row-reg">
            <div class="col-lg-3"></div>
            <div class="col-lg-6">
                <div class="input-group">
                    <span class="input-group-addon">确认密码</span>
                    <input type="password" id="pwd" class="form-control" placeholder="请确认您的密码">
                </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
            <div class="col-lg-3 cue" id="pwd-tips"></div>
        </div><!-- /.row -->
        <!-- 学生类型 -->
        <div class="row row-reg">
            <div class="col-lg-3"></div>
            <div class="col-lg-6 form-wrap">
                <div class="input-group-addon stutype-left">学生类型</div>
                <div class="stutype-right">
                    <label class="demo--label">
                        <input class="demo--radio" type="radio" name="StuType" id="StuType" value="undergraduate" checked> 
                        <span class="demo--radioInput"></span>本科
                    </label>
                    <label class="demo--label">
                        <input class="demo--radio" type="radio" name="StuType" id="StuType" value="promaster"> 
                        <span class="demo--radioInput"></span>专业硕士
                    </label>
                    <label class="demo--label">
                        <input class="demo--radio" type="radio" name="StuType" id="StuType" value="acdmaster"> 
                        <span class="demo--radioInput"></span>学术硕士
                    </label>
                    <label class="demo--label">
                        <input class="demo--radio" type="radio" name="StuType" id="StuType" value="doctor"> 
                        <span class="demo--radioInput"></span>博士
                    </label>
                </div>
            </div><!-- /.col-lg-6 -->
        </div><!-- /.row -->
        <!-- 学院 -->
        <div class="row row-reg" style="height:35px;">
            <div class="col-lg-3"></div>
            <div class="col-lg-6">
                <div class="form-group form-wrap">
                    <div class="input-group-addon form-left">学院</div>
                    <div class="form-right">
                        <select class="form-control" name="School">
                            <option value="国家示范性软件学院">国家示范性软件学院</option>
                            <option value="机械工程学院">机械工程学院</option>
                            <option value="建设工程学部">建设工程学部</option>
                            <option value="外国语学院">外国语学院</option>
                            <option value="建筑与艺术学院">建筑与艺术学院</option>
                        </select>
                    </div>
                </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
        </div><!-- /.row -->
        <!-- 年级 -->
        <div class="row row-reg">
            <div class="col-lg-3"></div>
            <div class="col-lg-6">
                <div class="form-group form-wrap">
                    <div class="input-group-addon form-left">年级</div>
                    <div class="form-right">
                        <select class="form-control" name="Grade">
                            <option value="2019">2019</option>
                            <option value="2020">2020</option>
                            <option value="2021">2021</option>
                        </select>
                    </div>
                </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
        </div><!-- /.row -->

        <div class="row row-reg">
            <div class="col-lg-4"></div>
            <div class="col-lg-4">
                <input type="submit" class="btn btn-block btn-nav-orange" value="注 册"
                       data-loading-text="正在注册，请稍后..." data-complete-text="注册成功" id="reg">
            </div>
        </div>
    </form>
</div>
<script type="text/javascript">
    var NameisOK = false;
    var StuNumisOK = false;
    var PhoneisOK = false;
    var PasswordisOK = false;
    var PwdisOK = false;
    $(function () {
        $("#Name").blur(function () {
            var tips = $("#Name-tips");
            var content=$(this).val().trim();
            if (content == "") {
                NameisOK = false;
                tips.text("姓名不能为空！");
                $(this).parent().addClass("has-error");
                tips.css({
                    "background": 'none'
                });
            }
            else {
                var ret = /^[\u4e00-\u9fa5_a-zA-Z0-9_]{2,20}$/;
                if (ret.test(content)) {
                    NameisOK = true;
                    tips.text("");
                    tips.css({
                        "background": 'url(/Resource/OK.png) no-repeat left center',
                        "background-size": "16px 16px"
                    });
                    $(this).parent().removeClass("has-error");
                    $(this).parent().addClass("has-success");
                } else {
                    NameisOK = false;
                    tips.text("姓名格式不正确！");
                    $(this).parent().addClass("has-error");
                    tips.css({
                        "background": 'none'
                    });
                }

            }
        });
        $("#StuNum").blur(function () {
            var tips = $("#StuNum-tips");
            var content = $(this).val().trim();
            if (content == "") {
                StuNumisOK = false;
                tips.text("学号不能为空！");
                $("#StuNum").parent().addClass("has-error");
                tips.css({
                    "background": 'none'
                });
            }
            else {
                var ret = /^[0-9]{8,12}$/;
                if (ret.test(content)) {
                    $.get("/User/findUserByStuNum/"+content, 
                    function (data) {
                        var result = $.parseJSON(data).status;
                        if (result == 1) {
                            StuNumisOK = true;
                            $("#StuNum").parent().removeClass("has-error");
                            $("#StuNum").parent().addClass("has-success");
                            tips.text("");
                            tips.css({
                                "background": 'url(/Resource/OK.png) no-repeat left center',
                                "background-size": "16px 16px"
                            });
                        }
                        else {
                            StuNumisOK = false;
                            tips.text("该学号已存在！");
                            $("#StuNum").parent().addClass("has-error");
                            tips.css({
                                "background": 'none'
                            });
                        }
                    });
                } else {
                    StuNumisOK = false;
                    tips.text("学号格式不正确！");
                    $("#StuNum").parent().addClass("has-error");
                    tips.css({
                        "background": 'none'
                    });
                }

            }
        });
        $("#Phone").blur(function () {
            var tips = $("#Phone-tips");
            var content = $(this).val().trim();
            if (content == "") {
                PhoneisOK = false;
                tips.text("手机号码不能为空！");
                $(this).parent().addClass("has-error");
                tips.css({
                    "background": 'none'
                });
            }
            else {
                var ret = /^[0-9]{11,11}$/;
                if (ret.test(content)) {
                    PhoneisOK = true;
                    tips.text("");
                    tips.css({
                        "background": 'url(/Resource/OK.png) no-repeat left center',
                        "background-size": "16px 16px"
                    });
                    $(this).parent().removeClass("has-error");
                    $(this).parent().addClass("has-success");
                } else {
                    PhoneisOK = false;
                    tips.text("手机号码格式不正确！");
                    $(this).parent().addClass("has-error");
                    tips.css({
                        "background": 'none'
                    });
                }

            }
        });
        $("#Password").blur(function () {
            var tips = $("#Password-tips");
            var content = $(this).val().trim();
            if (content == "") {
                PasswordisOK = false;
                tips.text("密码不能为空！");
                $(this).parent().addClass("has-error");
                tips.css({
                    "background": 'none'
                });
            }
            else {
                var ret = /^[a-zA-Z0-9]{6,20}$/;
                if (ret.test(content)) {
                    PasswordisOK = true;
                    tips.text("");
                    tips.css({
                        "background": 'url(/Resource/OK.png) no-repeat left center',
                        "background-size": "16px 16px"
                    });
                    $(this).parent().removeClass("has-error");
                    $(this).parent().addClass("has-success");
                } else {
                    PasswordisOK = false;
                    tips.text("密码格式不正确！");
                    $(this).parent().addClass("has-error");
                    tips.css({
                        "background": 'none'
                    });
                }

            }
        });
        $("#pwd").blur(function () {
            var tips = $("#pwd-tips");
            var content = $(this).val().trim();
            var content1 = $("#Password").val().trim();
            if (content == "") {
                PwdisOK = false;
                tips.text("您未确认密码！");
                $(this).parent().addClass("has-error");
                tips.css({
                    "background": 'none'
                });
            }
            else {
                if (content == content1) {
                    PwdisOK = true;
                    tips.text("");
                    tips.css({
                        "background": 'url(/Resource/OK.png) no-repeat left center',
                        "background-size": "16px 16px"
                    });
                    $(this).parent().removeClass("has-error");
                    $(this).parent().addClass("has-success");
                } else {
                    PwdisOK = false;
                    tips.text("您的密码与之前密码不同！");
                    $(this).parent().addClass("has-error");
                    tips.css({
                        "background": 'none'
                    });
                }

            }
        });
    });
    function Vaild()
    {
        return NameisOK && StuNumisOK && PhoneisOK && PasswordisOK && PwdisOK;
    }
</script>